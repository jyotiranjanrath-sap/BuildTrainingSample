"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.I18nCodeAction = void 0;
class I18nCodeAction {
    constructor(commandId) {
        this._commandId = commandId;
    }
    provideCodeActions(document, range, context) {
        let that = this;
        if (context.diagnostics.length <= 0) {
            return Promise.resolve([]);
        }
        let diagnostic;
        for (let index = 0; index < context.diagnostics.length; index++) {
            if (context.diagnostics[index].code === "I18nKeyNotFound") {
                diagnostic = context.diagnostics[index];
                break;
            }
        }
        if (!diagnostic) {
            return Promise.resolve([]);
        }
        let i18nKey = document.getText(diagnostic.range);
        if (!i18nKey) {
            return Promise.resolve([]);
        }
        //strip enclosing quote if necessary
        if (i18nKey[0] === '"' || i18nKey[0] === "'") {
            i18nKey = i18nKey.slice(1, -1);
        }
        if (!i18nKey || i18nKey.length === 0) {
            return Promise.resolve([]);
        }
        let title = `MDK: Create i18n entry for key: ${i18nKey}`;
        return Promise.resolve([{
                title: title,
                command: that._commandId,
                arguments: [i18nKey]
            }]);
    }
}
exports.I18nCodeAction = I18nCodeAction;
//# sourceMappingURL=I18nCodeAction.js.map